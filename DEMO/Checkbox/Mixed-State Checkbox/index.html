<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mixed-State Checkbox Accessibility Demo</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <fieldset>
      <legend>
        Sandwich Condiments
      </legend>
      <div
        role="checkbox"
        class="group_checkbox"
        aria-checked="mixed"
        aria-controls="cond1 cond2 cond3 cond4"
        tabindex="0"
      >
        All condiments
      </div>
      <ul class="checkboxes">
        <li>
          <label>
            <input type="checkbox" id="cond1" />
            Lettuce
          </label>
        </li>
        <li>
          <label>
            <input type="checkbox" id="cond2" checked="" />
            Tomato
          </label>
        </li>
        <li>
          <label>
            <input type="checkbox" id="cond3" />
            Mustard
          </label>
        </li>
        <li>
          <label>
            <input type="checkbox" id="cond4" />
            Sprouts
          </label>
        </li>
      </ul>
    </fieldset>
    <script type="text/javascript" src="controlledCheckbox.js"></script>
    <script type="text/javascript" src="checkboxMixed.js"></script>
    <script type="text/javascript">
      function checkboxFocus(event) {
        event.currentTarget.parentNode.classList.add("focus");
      }
      function checkboxBlur(event) {
        event.currentTarget.parentNode.classList.remove("focus");
      }
      window.onload = function () {
        var i;
        var mixed = document.querySelectorAll('[role="checkbox"]');
        for (i = 0; i < mixed.length; i++) {
          var m = new CheckboxMixed(mixed[i]);
          m.init();
        }
        var checkboxes = document.querySelectorAll('input[type="checkbox"]');
        for (i = 0; i < checkboxes.length; i++) {
          var cb = checkboxes[i];
          cb.addEventListener("focus", checkboxFocus);
          cb.addEventListener("blur", checkboxBlur);
        }
      };
    </script>
  </body>
</html>
